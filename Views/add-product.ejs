<!DOCTYPE html>
<html>

<head>
  <title>Add Product</title>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-272764433-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-272764433-1');
  </script>

</head>

<body>
  <%- include("./Partials/localiztion.ejs") %>
  <%- include("./Partials/navadmin.ejs") %>
  <h1>Add Product</h1>
  <form method="POST" action="/add-product" enctype="multipart/form-data" onsubmit="return validateForm()">
    <label for="itemName">Item Name:</label>
    <input type="text" id="itemName" name="itemName" minlength="6" required>
    <span class="error-message" id="itemNameError"></span>

    <label for="Sales">Sales:</label>
    <input type="number" id="Sales" name="Sales" min="0" max="100" required>
    <span class="error-message" id="salesError"></span>

    <label for="description">Description:</label>
    <textarea id="description" name="description" required></textarea>
    <span class="error-message" id="descriptionError"></span>

    <label for="price_before">Price Before:</label>
    <input type="number" id="price_before" name="price_before" onchange="calculatePriceAfter()" required>
    <span class="error-message" id="priceBeforeError"></span>

    <label for="price_after">Price After:</label>
    <input type="number" id="price_after" name="price_after" readonly required>
    <span class="error-message" id="priceAfterError"></span>

    <label for="type">Type:</label>
    <select id="type" name="type" required>
      <option value="jackets">Jackets</option>
      <option value="tops">Tops</option>
      <option value="bottoms">Bottoms</option>
      <option value="accessories">Accessories</option>
    </select>
    <span class="error-message" id="typeError"></span>

    <label for="image">Images:</label>
    <input type="file" id="image" name="image" accept="image/*" required>
    <span class="error-message" id="imageError"></span>

    <button type="submit">Add Photo</button>
  </form>

  <script>
    function validateForm() {
      const itemNameInput = document.getElementById("itemName");
      const salesInput = document.getElementById("Sales");
      const descriptionInput = document.getElementById("description");
      const priceBeforeInput = document.getElementById("price_before");
      const priceAfterInput = document.getElementById("price_after");
      const typeInput = document.getElementById("type");
      const imageInput = document.getElementById("image");

      const itemNameError = document.getElementById("itemNameError");
      const salesError = document.getElementById("salesError");
      const descriptionError = document.getElementById("descriptionError");
      const priceBeforeError = document.getElementById("priceBeforeError");
      const priceAfterError = document.getElementById("priceAfterError");
      const typeError = document.getElementById("typeError");
      const imageError = document.getElementById("imageError");

      // Reset error messages
      itemNameError.textContent = "";
      salesError.textContent = "";
      descriptionError.textContent = "";
      priceBeforeError.textContent = "";
      priceAfterError.textContent = "";
      typeError.textContent = "";
      imageError.textContent = "";

      // Validate each field
      let isValid = true;

      if (itemNameInput.value.trim() === "") {
        itemNameError.textContent = "Item name is required";
        isValid = false;
      } else if (itemNameInput.value.trim().length < 6) {
        itemNameError.textContent = "Item name must be at least 6 characters";
        isValid = false;
      }

      if (salesInput.value.trim() === "") {
        salesError.textContent = "Sales value is required";
        isValid = false;
      } else if (isNaN(salesInput.value) || salesInput.value > 100) {
        salesError.textContent = "Sales must be a number between 0 and 100";
        isValid = false;
      }

      if (descriptionInput.value.trim() === "") {
        descriptionError.textContent = "Description is required";
        isValid = false;
      } else if (descriptionInput.value.trim().split(" ").length < 2) {
        descriptionError.textContent = "Description must have at least two words";
        isValid = false;
      }

      if (priceBeforeInput.value.trim() === "") {
        priceBeforeError.textContent = "Price before is required";
        isValid = false;
      } else if (isNaN(priceBeforeInput.value)) {
        priceBeforeError.textContent = "Price before must be a number";
        isValid = false;
      }

      if (priceAfterInput.value.trim() === "") {
        priceAfterError.textContent = "Price after is required";
        isValid = false;
      } else if (isNaN(priceAfterInput.value)) {
        priceAfterError.textContent = "Price after must be a number";
        isValid = false;
      }

      if (typeInput.value === "") {
        typeError.textContent = "Type is required";
        isValid = false;
      }

      if (!imageInput.files || imageInput.files.length === 0) {
        imageError.textContent = "Image is required";
        isValid = false;
      }

      // Return the form's validation status
      return isValid;
    }

    function calculatePriceAfter() {
      const salesInput = document.getElementById("Sales");
      const priceBeforeInput = document.getElementById("price_before");
      const priceAfterInput = document.getElementById("price_after");

      const sales = parseInt(salesInput.value) || 0;
      const priceBefore = parseInt(priceBeforeInput.value) || 0;

      const priceAfter = priceBefore * (100 - sales) / 100;
      priceAfterInput.value = priceAfter > 0 ? priceAfter : 0;
    }

    const salesInput = document.getElementById("Sales");
    const priceBeforeInput = document.getElementById("price_before");
    const priceAfterInput = document.getElementById("price_after");

    salesInput.addEventListener("input", calculatePriceAfter);
    priceBeforeInput.addEventListener("input", calculatePriceAfter);

    calculatePriceAfter();
  </script>
</body>

</html>



</html>
<style>
  body {
    font-family: Arial, sans-serif;
    background-color: #f5f5f5;
    margin: 0;
    padding: 20px;
  }

  h1 {
    color: #333;
    text-align: center;
    margin-top: 30px;
  }

  form {
    max-width: 500px;
    margin: 30px auto;
    background-color: #fff;
    border: 1px solid #ccc;
    border-radius: 5px;
    padding: 20px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
  }

  label {
    display: block;
    margin-top: 10px;
    font-weight: bold;
  }

  input[type="text"],
  textarea,
  input[type="number"],
  select {
    width: 100%;
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 4px;
    box-sizing: border-box;
    margin-bottom: 10px;
  }

  textarea {
    height: 100px;
  }

  input[type="file"] {
    display: block;
    margin-top: 5px;
  }

  button[type="submit"] {
    background-color: #007bff;
    color: #fff;
    border: none;
    border-radius: 3px;
    padding: 10px 20px;
    font-weight: bold;
    cursor: pointer;
    transition: background-color 0.3s;
  }

  button[type="submit"]:hover {
    background-color: #0056b3;
  }

  .error-message {
    color: red;
    font-size: 0.8em;
    margin-top: 5px;
  }
</style>
